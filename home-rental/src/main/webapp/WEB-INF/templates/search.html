<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:th="http://www.thymeleaf.org"
      xmlns:tiles="http://www.thymeleaf.org"
      lang="en">

    <head>
        <title tiles:fragment="title">Home Rental | Search</title>
        <link rel="stylesheet" tiles:fragment="css-specific" href="/css/search.css" th:href="@{/css/search.css}" />
    </head>

    <body tiles:fragment="content">        
        <div class="row map-wrapper">
            <div id="search-params" th:attr="data-search-params=${params}"></div>
            <div class="span9">
                <div id="map-container"></div>
            </div>
            <div class="span3">
                 <div id="map-caption">
                    <!-- Property type selector -->
                    <div class="search-selector">
                        <span class="selector-title"><strong>TYPE</strong></span>
                        <ul id="property-type">
                            <li class="list-selector">
                                <input type="checkbox" name="property_type" th:disabled="${specs[0]} == 0" value="FLAT" />
                                <span class="pull-right badge badge-info" th:text="${specs[0]}"></span>
                                <span>FLAT</span>
                            </li>
                            <li class="list-selector">
                                <input type="checkbox" name="property_type" th:disabled="${specs[1]} == 0" value="HOUSE" />
                                <span class="pull-right badge badge-info" th:text="${specs[1]}"></span>
                                <span>HOUSE</span>
                            </li>
                            <li class="list-selector">
                                <input type="checkbox" name="property_type" th:disabled="${specs[2]} == 0" value="LOFT" />
                                <span class="pull-right badge badge-info" th:text="${specs[2]}"></span>
                                <span>LOFT</span>
                            </li>
                        </ul>
                    </div><!-- /end search-selector -->

                    <!-- Property price selector -->
                    <div class="search-selector">
                        <span class="selector-title"><strong>PRICE</strong></span>
                        <span id="max_price" class="pull-right price" th:text="${specs[8]}"></span>
                        <span id="min_price" class="price" th:text="${specs[7]}"></span>
                        <div id="slider"></div>
                    </div><!-- /end search-selector -->

                    <!-- Property options selector -->
                    <div class="search-selector">
                        <span class="selector-title"><strong>OPTIONS</strong></span>
                        <ul id="property-options">
                            <li class="list-selector">
                                <input type="checkbox" name="property_options" th:disabled="${specs[3]} == 0" value="parking" />
                                <span class="pull-right badge badge-info" th:text="${specs[3]}"></span>
                                <span>Parking</span>
                            </li>
                            <li class="list-selector">
                                <input type="checkbox" name="property_options" th:disabled="${specs[4]} == 0" value="swimming_pool" />
                                <span class="pull-right badge badge-info" th:text="${specs[4]}"></span>
                                <span>Swimming Pool</span>
                            </li>
                            <li class="list-selector">
                                <input type="checkbox" name="property_options" th:disabled="${specs[5]} == 0" value="wifi" />
                                <span class="pull-right badge badge-info" th:text="${specs[5]}"></span>
                                <span>Wifi</span>
                            </li>
                            <li class="list-selector">
                                <input type="checkbox" name="property_options" th:disabled="${specs[6]} == 0" value="laundry" />
                                <span class="pull-right badge badge-info" th:text="${specs[6]}"></span>
                                <span>Laundry</span>
                            </li>
                        </ul>
                    </div><!-- /end search-selector -->
                </div><!-- /end map-caption -->
            </div>
        </div><!-- /end row -->
        
        <!-- Bloc Search results -->
        <div class="row">
            <div id="search-results">
                <div id="sort-bar">
                    <span id="sort-bar-results"><strong>RESULTS FOUND : <span id="sort-bar-results-value" th:text="${#lists.size(results)}"></span></strong></span>
                    <span id="sort-bar-sorter"><strong>SORT BY :</strong></span>
                    <div class="btn-group">
                        <button class="btn" id="sorter-price">PRICE</button>
                        <button class="btn" id="sorter-note">NOTE</button>
                      </div>
                </div>
                <ul id="search-results-list">
                    <li class="search-results-item" th:each="r : ${results}" th:attr="data-property-id=${r.propertyId}">
                        <div class="pull-left search-results-item-pict"></div>
                        <div class="pull-left search-results-item-content">
                            <p class="item-content-title" th:text="${r.title}"></p>
                            <p class="item-content-address" th:text="${r.country} + ' - ' + ${r.city}"></p>
                            <p class="item-content-desc" th:text="${r.shortDesc}"></p>
                        </div>
                        <div class="pull-left search-results-item-action">
                            <div class="item-action-price" th:text="'â‚¬' + ${r.price}"></div>
                            <div class="item-action-btn">
                                <a href="#" id="btn-booking" class="btn btn-info">Book it !</a>
                                <a href="#" th:href="@{/property/__${r.propertyId}__}" id="btn-consult" class="btn">Consult</a>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </li>
                </ul>
            </div><!-- /end search-results -->
        </div>
        
        <!-- Custom js page specific -->
        <div tiles:fragment="js-specific">
            <script type="text/javascript" src="#" th:src="@{/js/search.js}"></script>
        </div>
        
    </body>
</html>